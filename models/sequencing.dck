VERSION 18
*******************************************************************************
*** TRNSYS input file (deck) generated by TrnsysStudio
*** on Friday, April 27, 2018 at 14:47
*** from TrnsysStudio project: D:\DataCenterCCHP\Models\MCMC\models\sequencing.tpf
*** 
*** If you edit this file, use the File/Import TRNSYS Input File function in 
*** TrnsysStudio to update the project. 
*** 
*** If you have problems, questions or suggestions please contact your local 
*** TRNSYS distributor or mailto:software@cstb.fr 
*** 
*******************************************************************************


*******************************************************************************
*** Units 
*******************************************************************************

*******************************************************************************
*** Control cards
*******************************************************************************
* START, STOP and STEP
CONSTANTS 3
START=0
STOP=168
STEP=0.125
SIMULATION 	 START	 STOP	 STEP	! Start time	End time	Time step
TOLERANCES 0.001 0.001			! Integration	 Convergence
LIMITS 30 30 30				! Max iterations	Max warnings	Trace limit
DFQ 1					! TRNSYS numerical integration solver method
WIDTH 80				! TRNSYS output file width, number of characters
LIST 					! NOLIST statement
					! MAP statement
SOLVER 0 1 1				! Solver statement	Minimum relaxation factor	Maximum relaxation factor
NAN_CHECK 0				! Nan DEBUG statement
OVERWRITE_CHECK 0			! Overwrite DEBUG statement
TIME_REPORT 0			! disable time report
EQSOLVER 0				! EQUATION SOLVER statement
* User defined CONSTANTS 
*$USER_CONSTANTS
EQUATIONS 1
nPlots = (STOP-START)/168.
*$USER_CONSTANTS_END


* Model "Type577" (Type 577)
* 

UNIT 2 TYPE 577	 Type577
*$UNIT_NAME Type577
*$MODEL .\Utility Library (TESS)\Random Numbers\Uniform Distribution\Type577.tmf
*$POSITION 201 364
*$LAYER Main # 
*$# Random number generator drawn from a uniform distribution.
PARAMETERS 3
0.0		! 1 Minimum Value for Function
1		! 2 Maximum Value for Function
153789		! 3 Initial Seed
INPUTS 1
0,0		! [unconnected] Generate Random Number?
*** INITIAL INPUT VALUES
1 
*------------------------------------------------------------------------------

* Model "Type150" (Type 150)
* 

UNIT 3 TYPE 150	 Type150
*$UNIT_NAME Type150
*$MODEL .\Controllers\Delayed Inputs\Type150.tmf
*$POSITION 201 476
*$LAYER Main # 
PARAMETERS 3
1		! 1 Number of Inputs
1		! 2 # of Timesteps to Hold Value
1		! 3 Initial Function Value
INPUTS 1
0,0		! [unconnected] Input Value
*** INITIAL INPUT VALUES
0.0 
*------------------------------------------------------------------------------

* Model "Type8001" (Type 8001)
* 

UNIT 4 TYPE 8001	 Type8001
*$UNIT_NAME Type8001
*$MODEL .\UserDefined\FailureStateCalculation\Type8001.tmf
*$POSITION 398 428
*$LAYER Main # 
*$# It uses dynamic storage to store the state of the machine and the time of the machine
*$# in the previous time step to judge if the machine should be available for control in the
*$# current time step. Since the calculation is based on the operation time of a machine
*$# when it is normal, it also expects an delayed input of control on/off of the machine
*$# from Type150 too.
*$# 
*$# At start time:
*$# Step 1: Creates two dynamic storages - 1 for state and 1 for time at a state
*$# Step 2: Set the initial state with the variable InitialState and initial time
*$# at a state to be zero.
*$# 
*$# At other times:
*$# Step 1: Get the control on/off signal from the previous time step
*$# Step 2: Get the dynamic storage
*$# Step 3: Update the operation time when it is normal
*$# Step 3: Calculate the probability matrix of state transition
*$# Step 4: Get a random number from a pseudorandom number generator
*$# Step 5: Judge the next state
*$# Step 6: Update the state variable
*$# Step 7: Update the state time by the operation time if it is normal
*$# Step 8: Update the state time by incrementing it if it has failed
*$# Step 9: Outputs
PARAMETERS 3
36		! 1 MTTF
24		! 2 MTTR
1		! 3 InitialState
INPUTS 2
3,1 		! Type150:Output Value ->DelayedOnOff
2,1 		! Type577:Random Number ->RandomNumber
*** INITIAL INPUT VALUES
1 0 
*------------------------------------------------------------------------------

* Model "WC-Chiller" (Type 666)
* 

UNIT 5 TYPE 666	 WC-Chiller
*$UNIT_NAME WC-Chiller
*$MODEL .\HVAC Library (TESS)\Chillers\Water-Cooled Chiller\Type666.tmf
*$POSITION 464 483
*$LAYER Main # 
*$# Water-Cooled Chiller
PARAMETERS 9
6336000		! 1 Rated Capacity
5.25		! 2 Rated C.O.P.
30		! 3 Logical Unit - Performance Data
31		! 4 Logical Unit - PLR Data
4.190		! 5 CHW Fluid Specific Heat
4.190		! 6 CW Fluid Specific Heat
6		! 7 Number of CW Points
6		! 8 Number of CHW Points
5		! 9 Number of PLRs
INPUTS 6
13,1 		! PCHWP:Outlet fluid temperature ->Chilled Water Inlet Temperature
13,2 		! PCHWP:Outlet flow rate ->Chilled Water Flowrate
12,1 		! CDP:Outlet fluid temperature ->Cooling Water Temperature
12,2 		! CDP:Outlet flow rate ->Cooling Water Flowrate
0,0		! [unconnected] CHW Set Point Temperature
0,0		! [unconnected] Chiller Control Signal
*** INITIAL INPUT VALUES
12.22 87500.0 30.0 110000.0 12 1.0 
*** External files
ASSIGN "C:\TRNSYS18\Tess Models\SampleCatalogData\WaterCooledChiller\Samp_C.Dat" 30
*|? Which file contains the chiller performance data? |1000
ASSIGN "C:\TRNSYS18\Tess Models\SampleCatalogData\WaterCooledChiller\Samp_PLR.Dat" 31
*|? Which file contains the part-load performance data? |1000
*------------------------------------------------------------------------------

* EQUATIONS "LoadCalculator"
* 
EQUATIONS 1
LoadinkJperhour = 1760*0.9*3600+1760*0.1*3600*SIN(90*TIME/STEP)
*$UNIT_NAME LoadCalculator
*$LAYER Main
*$POSITION 1070 515
*$UNIT_NUMBER 6

*------------------------------------------------------------------------------


* EQUATIONS "ReturnTemp"
* 
EQUATIONS 1
RetTemp = SupplyTemp+LoadinkJperhour/4.190/1000.0/302.4
*$UNIT_NAME ReturnTemp
*$LAYER Main
*$POSITION 846 515
*$UNIT_NUMBER 7

*------------------------------------------------------------------------------


* EQUATIONS "SupplyTemp"
* 
EQUATIONS 1
SupplyTemp = 12
*$UNIT_NAME SupplyTemp
*$LAYER Main
*$POSITION 1050 435
*$UNIT_NUMBER 8

*------------------------------------------------------------------------------


* Model "FlowMixer" (Type 11)
* 

UNIT 9 TYPE 11	 FlowMixer
*$UNIT_NAME FlowMixer
*$MODEL .\Hydronics\Controlled Flow Mixer\Other Fluids\Type11d.tmf
*$POSITION 702 483
*$LAYER Water Loop # 
PARAMETERS 1
3		! 1 Controlled flow mixer mode
INPUTS 5
5,1 		! WC-Chiller:Chilled Water Temperature ->Temperature at inlet 1
5,2 		! WC-Chiller:Chilled Water Flowrate ->Flow rate at inlet 1
10,1 		! AC-Chiller:Outlet Fluid Temperature ->Temperature at inlet 2
10,2 		! AC-Chiller:Fluid Flowrate ->Flow rate at inlet 2
0,0		! [unconnected] Control signal
*** INITIAL INPUT VALUES
20.0 100.0 20.0 100.0 0.5 
*------------------------------------------------------------------------------

* Model "AC-Chiller" (Type 655)
* 

UNIT 10 TYPE 655	 AC-Chiller
*$UNIT_NAME AC-Chiller
*$MODEL .\HVAC Library (TESS)\Chillers\Air-Cooled Chiller\Type655.tmf
*$POSITION 462 707
*$LAYER Main # 
*$# Air-Cooled Chiller
PARAMETERS 8
6336000		! 1 Rated Capacity
3.0		! 2 Rated C.O.P.
32		! 3 Logical Unit for Performance Data
33		! 4 Logical Unit for PLR Data File
4.190		! 5 Fluid Specific Heat
5		! 6 Number of Ambient Temperatures
6		! 7 Number of CHW Set Points
5		! 8 Number of Part Load Ratios
INPUTS 5
13,1 		! PCHWP:Outlet fluid temperature ->Chilled Water Inlet Temperature
13,2 		! PCHWP:Outlet flow rate ->Chilled Water Flowrate
0,0		! [unconnected] Set Point Temperature
0,0		! [unconnected] Ambient Temperature
0,0		! [unconnected] Chiller Control Signal
*** INITIAL INPUT VALUES
12.22 50000 12 30.0 0 
*** External files
ASSIGN "C:\TRNSYS18\Tess Models\SampleCatalogData\AirCooledChiller\Samp_C.Dat" 32
*|? Which file contains the chiller performance data? |1000
ASSIGN "C:\TRNSYS18\Tess Models\SampleCatalogData\AirCooledChiller\Samp_PLR.Dat" 33
*|? Which file contains the part-load performance data? |1000
*------------------------------------------------------------------------------

* Model "CT" (Type 510)
* 

UNIT 11 TYPE 510	 CT
*$UNIT_NAME CT
*$MODEL .\HVAC Library (TESS)\Closed Circuit Cooling Tower\Type510.tmf
*$POSITION 457 323
*$LAYER Main # 
*$# CLOSED CIRCUIT COOLING TOWER
PARAMETERS 14
2		! 1 Humidity mode
32.2222		! 2 Design inlet fluid temperature
29.4444		! 3 Design outlet fluid temperature
5678.12		! 4 Design fluid flow rate
4.190		! 5 Fluid specific heat
35.0		! 6 Design ambient air temperature
25.5556		! 7 Design wet bulb temperature
5678.12		! 8 Design air flow rate
1.0		! 9 Air pressure at design conditions
5369.04		! 10 Rated fan power
3		! 11 Number of power coefficients
0.0		! 12 Power coefficient-1
0.0		! 13 Power coefficient-2
0.0		! 14 Power coefficient-3
INPUTS 8
5,3 		! WC-Chiller:Cooling Water Temperature ->Fluid inlet temperature
5,4 		! WC-Chiller:Cooling Water Flowrate ->Fluid flow rate
0,0		! [unconnected] Ambient temperature
0,0		! [unconnected] Ambient humidity ratio
0,0		! [unconnected] Ambient % RH
0,0		! [unconnected] Ambient air pressure
0,0		! [unconnected] Fan control signal
0,0		! [unconnected] Desired Outlet Temperature
*** INITIAL INPUT VALUES
10.0 0.0 20.0 0.005 50.0 1.0 0.0 30.0 
*------------------------------------------------------------------------------

* Model "CDP" (Type 114)
* 

UNIT 12 TYPE 114	 CDP
*$UNIT_NAME CDP
*$MODEL .\Hydronics\Pumps\Single Speed\Type114.tmf
*$POSITION 569 403
*$LAYER Main # 
*$# SINGLE-SPEED PUMP
PARAMETERS 4
1000.0		! 1 Rated flow rate
4.19		! 2 Fluid specific heat
2684.0		! 3 Rated power
0.0		! 4 Motor heat loss fraction
INPUTS 5
11,1 		! CT:Fluid outlet temperature ->Inlet fluid temperature
11,2 		! CT:Outlet fluid flow rate ->Inlet fluid flow rate
0,0		! [unconnected] Control signal
0,0		! [unconnected] Overall pump efficiency
0,0		! [unconnected] Motor efficiency
*** INITIAL INPUT VALUES
20.0 1000 1.0 0.6 0.9 
*------------------------------------------------------------------------------

* Model "PCHWP" (Type 114)
* 

UNIT 13 TYPE 114	 PCHWP
*$UNIT_NAME PCHWP
*$MODEL .\Hydronics\Pumps\Single Speed\Type114.tmf
*$POSITION 457 595
*$LAYER Main # 
*$# SINGLE-SPEED PUMP
PARAMETERS 4
360000		! 1 Rated flow rate
4.19		! 2 Fluid specific heat
90000		! 3 Rated power
0.0		! 4 Motor heat loss fraction
INPUTS 5
RetTemp		! ReturnTemp:RetTemp ->Inlet fluid temperature
0,0		! [unconnected] Inlet fluid flow rate
0,0		! [unconnected] Control signal
0,0		! [unconnected] Overall pump efficiency
0,0		! [unconnected] Motor efficiency
*** INITIAL INPUT VALUES
20.0 1000 1.0 0.6 0.9 
*------------------------------------------------------------------------------

* Model "Type577-2" (Type 577)
* 

UNIT 14 TYPE 577	 Type577-2
*$UNIT_NAME Type577-2
*$MODEL .\Utility Library (TESS)\Random Numbers\Uniform Distribution\Type577.tmf
*$POSITION 201 364
*$LAYER Main # 
*$# Random number generator drawn from a uniform distribution.
PARAMETERS 3
0.0		! 1 Minimum Value for Function
1		! 2 Maximum Value for Function
153789		! 3 Initial Seed
INPUTS 1
0,0		! [unconnected] Generate Random Number?
*** INITIAL INPUT VALUES
1 
*------------------------------------------------------------------------------

* Model "Type150-2" (Type 150)
* 

UNIT 15 TYPE 150	 Type150-2
*$UNIT_NAME Type150-2
*$MODEL .\Controllers\Delayed Inputs\Type150.tmf
*$POSITION 201 476
*$LAYER Main # 
PARAMETERS 3
1		! 1 Number of Inputs
1		! 2 # of Timesteps to Hold Value
1		! 3 Initial Function Value
INPUTS 1
0,0		! [unconnected] Input Value
*** INITIAL INPUT VALUES
0.0 
*------------------------------------------------------------------------------

* Model "Type8001-2" (Type 8001)
* 

UNIT 16 TYPE 8001	 Type8001-2
*$UNIT_NAME Type8001-2
*$MODEL .\UserDefined\FailureStateCalculation\Type8001.tmf
*$POSITION 398 428
*$LAYER Main # 
*$# It uses dynamic storage to store the state of the machine and the time of the machine
*$# in the previous time step to judge if the machine should be available for control in the
*$# current time step. Since the calculation is based on the operation time of a machine
*$# when it is normal, it also expects an delayed input of control on/off of the machine
*$# from Type150 too.
*$# 
*$# At start time:
*$# Step 1: Creates two dynamic storages - 1 for state and 1 for time at a state
*$# Step 2: Set the initial state with the variable InitialState and initial time
*$# at a state to be zero.
*$# 
*$# At other times:
*$# Step 1: Get the control on/off signal from the previous time step
*$# Step 2: Get the dynamic storage
*$# Step 3: Update the operation time when it is normal
*$# Step 3: Calculate the probability matrix of state transition
*$# Step 4: Get a random number from a pseudorandom number generator
*$# Step 5: Judge the next state
*$# Step 6: Update the state variable
*$# Step 7: Update the state time by the operation time if it is normal
*$# Step 8: Update the state time by incrementing it if it has failed
*$# Step 9: Outputs
PARAMETERS 3
36		! 1 MTTF
24		! 2 MTTR
1		! 3 InitialState
INPUTS 2
15,1 		! Type150-2:Output Value ->DelayedOnOff
14,1 		! Type577-2:Random Number ->RandomNumber
*** INITIAL INPUT VALUES
1 0 
*------------------------------------------------------------------------------

* Model "Type25c" (Type 25)
* 

UNIT 17 TYPE 25	 Type25c
*$UNIT_NAME Type25c
*$MODEL .\Output\Printer\Unformatted\No Units\Type25c.tmf
*$POSITION 888 643
*$LAYER Outputs # 
PARAMETERS 10
STEP		! 1 Printing interval
START		! 2 Start time
STOP		! 3 Stop time
34		! 4 Logical unit
0		! 5 Units printing mode
0		! 6 Relative or absolute start time
-1		! 7 Overwrite or Append
-1		! 8 Print header
0		! 9 Delimiter
1		! 10 Print labels
INPUTS 1
9,2 		! FlowMixer:Outlet flow rate ->Input to be printed
*** INITIAL INPUT VALUES
Flow 
*** External files
ASSIGN "D:\DataCenterCCHP\Models\MCMC\test_results\sequencing.out" 34
*|? Output file for printed results |1000
*------------------------------------------------------------------------------

END
*!LINK_STYLE
*!LINK 9:17
*!CONNECTION_SET 40:40:0:20:1:0:0:0:1:722,493:770,493:770,633:871,633
*!LINK 7:13
*!CONNECTION_SET 20:40:40:20:1:0:0:0:1:846,525:846,557:520,557:520,585:480,585
*!LINK 10:9
*!CONNECTION_SET 40:0:0:40:4,3:0:0:0:1:482,677:634,677:634,493:682,493
*!LINK 13:10
*!CONNECTION_SET 0:40:0:0:1,2:0:0:0:1:440,605:394,605:394,677:442,677
*!LINK 5:9
*!CONNECTION_SET 40:20:0:20:2,1:0:0:0:1:484,473:634,473:682,473
*!LINK 5:11
*!CONNECTION_SET 0:0:0:40:2,1:0:0:0:1:444,453:394,453:394,333:440,333
*!LINK 11:12
*!CONNECTION_SET 40:40:20:0:2,1:0:0:0:1:480,333:632,333:632,373:572,373
*!LINK 12:5
*!CONNECTION_SET 20:40:40:0:4,3:0:0:0:1:572,413:576,413:576,453:484,453
*!LINK 13:5
*!CONNECTION_SET 0:20:0:40:2,1:0:0:0:1:440,585:394,585:394,493:444,493
*!LINK 8:7
*!CONNECTION_SET 0:20:20:0:1:0:0:0:1:886,473:702,473:702,533
*!LINK 6:7
*!CONNECTION_SET 0:20:40:20:2:0:0:0:1:906,553:774,553:722,553
*!LINK 3:4
*!CONNECTION_SET 40:0:0:16:1:0:0:0:1:224,389:330,389:330,357:381,357
*!LINK 2:4
*!CONNECTION_SET 40:20:16:0:2:0:0:0:1:224,297:397,297:397,341
*!LINK 15:16
*!CONNECTION_SET 40:0:0:16:1:0:0:0:1:224,389:330,389:330,357:381,357
*!LINK 14:16
*!CONNECTION_SET 40:20:16:0:2:0:0:0:1:224,297:397,297:397,341
*!LINK_STYLE_END
*!TEXT_COMPONENT 48:32:48:32:688:283:Times New Roman:10:20:0:400:0:0:0:0:1:2:0:0:0
*This file tests the sequencing control of a water-cooled chiller and an air-cooled chiller. It should contain a controller module that checks
*
*1) If the water-cooled chiller is available
*2) If the air-cooled chiller is available
*3) If the inlet water temperature is higher than 12C
*
*If the inlet water temperature is higher than 12C, the controller will try to run the water-cooled chiller. However, if the water-cooled chiller has failed, it will try to run the air-cooled chiller. If both chillers fail, it will not start up any chiller and the cooling operation will be marked as failed.
*!TEXT_COMPONENT_END
